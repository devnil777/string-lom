<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StringLOM</title>
    <meta name="description" data-i18n="app_description"
        content="StringLOM — визуальный конвейер для текста. Цепочки блоков: Regex, JSON, CSV, сортировка. Результат мгновенно, 100% в браузере, без сервера. drag&drop, приватно, без установки">

    <!-- OPENGRAPH_PLACEHOLDER -->

    <!-- ANALYTICS_PLACEHOLDER -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jsonpath@1.1.1/jsonpath.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nunjucks/3.2.4/nunjucks.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link rel="icon" type="image/png" href="assets/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg" />
    <link rel="shortcut icon" href="assets/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png" />
    <link rel="manifest" href="assets/site.webmanifest" />
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/i18n.js"></script>
    <script src="js/tools.js"></script>
    <script src="js/categories.js"></script>
</head>

<body>
    <div class="app-wrapper">
        <div class="layout">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <div class="branding">
                        <img src="assets/favicon.svg" alt="StringLOM Logo">
                        <span>StringLOM</span>
                    </div>
                    <div class="app-menu">
                        <button class="icon-btn" id="app-menu-btn" title="Меню" data-i18n-title="menu_title">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                        <div class="app-menu-dropdown" id="app-menu-dropdown">
                            <a href="https://github.com/devnil777/string-lom" target="_blank" class="menu-item">
                                <i class="fab fa-github"></i>
                                <span data-i18n="home_page">Домашняя страница</span>
                            </a>
                            <a href="https://github.com/devnil777/string-lom/releases/latest" target="_blank"
                                class="menu-item">
                                <i class="fas fa-download"></i>
                                <span data-i18n="download_latest">Скачать последний релиз</span>
                            </a>
                            <div class="menu-divider"></div>

                            <!-- Language Selector -->
                            <div class="menu-item lang-item">
                                <i class="fas fa-globe"></i>
                                <select id="lang-select" class="menu-select">
                                    <option value="en">English</option>
                                    <option value="ru">Русский</option>
                                </select>
                            </div>

                            <div class="menu-item theme-item" id="theme-toggle-btn">
                                <i class="fas fa-moon"></i>
                                <span data-i18n="theme_dark">Темная тема</span>
                                <div class="switch">
                                    <div class="switch-handle"></div>
                                </div>
                            </div>
                            <div class="menu-divider"></div>
                            <div class="menu-item version-item">
                                <i class="fas fa-info-circle"></i>
                                <span><span data-i18n="version">Версия:</span> <small><!-- VERSION_PLACEHOLDER --></small></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sidebar-actions">
                    <button class="btn-sidebar-main" id="reset-btn-sidebar" title="Создать новую цепочку (Alt + N)" data-i18n-title="create_title">
                        <i class="fas fa-plus"></i> <span data-i18n="create">Создать</span>
                    </button>
                    <button class="btn-sidebar-secondary" id="paste-chain-btn-sidebar"
                        title="Импортировать цепочку (Alt + I)" data-i18n-title="import_title">
                        <i class="fas fa-file-import"></i> <span data-i18n="import">Импортировать</span>
                    </button>
                </div>
                <div class="sidebar-content">
                    <div class="sidebar-h2-container">
                        <h2 data-i18n="saved_chains">Сохраненные цепочки</h2>
                        <button class="toggle-saved-btn" id="toggle-saved-btn" title="Свернуть/Развернуть" data-i18n-title="toggle_saved">
                            <i class="fas fa-chevron-up"></i>
                        </button>
                    </div>
                    <div class="saved-list" id="saved-list">
                        <!-- saved items will go here -->
                    </div>
                </div>
            </aside>

            <div class="container">
                <div class="workspace-toolbar" id="workspace-toolbar">
                    <div class="workspace-title" id="workspace-title-display">
                        <i class="fas fa-desktop" style="color:var(--primary)"></i>
                        <span id="workspace-title-text" data-i18n="new_chain">Новая цепочка</span>
                    </div>
                    <div class="actions">
                        <button class="btn-toolbar" id="save-chain-btn" tabindex="-1"
                            title="Сохранить текущую цепочку (Alt + S)" data-i18n-title="save_title"><i class="fas fa-save"></i> <span data-i18n="save">Сохранить</span></button>
                        <button class="btn-toolbar" id="share-chain-btn" tabindex="-1" title="Поделиться цепочкой" data-i18n-title="share_title"><i
                                class="fas fa-share-alt"></i> <span data-i18n="share">Поделиться</span></button>
                        <button class="btn-toolbar" id="copy-chain-btn" tabindex="-1"
                            title="Экспортировать настройки цепочки (Alt + E)" data-i18n-title="export_title"><i class="fas fa-file-export"></i>
                            <span data-i18n="export">Экспортировать</span></button>
                    </div>
                </div>

                <main>
                    <div id="chain-container" class="chain-container">
                        <!-- Blocks will be injected here -->
                    </div>



                    <!-- RESULT BLOCK -->
                    <div class="chain-container" style="padding-bottom: 20px;">
                        <div class="block" data-type="result" style="border-left: 4px solid var(--success);">
                            <div class="block-header">
                                <div class="block-title"><i class="fas fa-flag-checkered"
                                        style="color:var(--success)"></i>
                                    <span data-i18n="final_result">Финальный результат</span>
                                </div>
                                <div class="block-actions">
                                    <button class="icon-btn" id="download-final-btn" title="Скачать результат" data-i18n-title="download_final"
                                        style="font-size: 1em;"><i class="fas fa-download"></i></button>
                                    <button class="icon-btn" id="copy-final-btn" title="Копировать результат" data-i18n-title="copy_final"
                                        style="font-size: 1em;"><i class="fas fa-copy"></i></button>
                                </div>
                            </div>
                            <div class="block-content">
                                <div class="io-section" style="margin-top: 5px;">
                                    <div class="result-box" id="final-output-box" style="min-height: 80px;"></div>
                                    <div class="stats" id="final-stats"></div>
                                </div>
                                <div class="params-grid" style="margin-top: 15px;">
                                    <div class="form-group">
                                        <label data-i18n="output_delimiter">Разделитель при выводе</label>
                                        <div style="display: flex; gap: 8px;">
                                            <select id="final-delimiter-select" style="flex: 1;">
                                                <option value="\n" data-i18n="newline">Новая строка</option>
                                                <option value="," data-i18n="comma">Запятая</option>
                                                <option value=";" data-i18n="semicolon">Точка с запятой</option>
                                                <option value=" " data-i18n="space">Пробел</option>
                                                <option value="custom" data-i18n="custom">Свой...</option>
                                            </select>
                                            <input type="text" id="final-custom-delimiter-input" placeholder="Текст..." data-i18n="custom_placeholder"
                                                style="display: none; width: 120px;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <!-- Footer removed -->
    </div>

    <!-- MODAL -->
    <div id="tool-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" data-i18n="select_tool">Выберите инструмент</div>
                <button class="close-modal" id="close-modal-btn">&times;</button>
            </div>
            <div class="modal-search-wrapper">
                <i class="fas fa-search"></i>
                <input type="text" id="tool-search-input" placeholder="Поиск инструментов (от 2-х символов)..." data-i18n="search_tools"
                    autocomplete="off">
            </div>
            <div class="tool-list" id="tool-list">
                <!-- Tool items generated here -->
            </div>
        </div>
    </div>

    <!-- DIALOG MODAL (Alert/Confirm/Prompt) -->
    <div id="dialog-modal" class="modal-overlay">
        <div class="modal dialog">
            <div class="modal-header">
                <div class="modal-title" id="dialog-title" data-i18n="confirmation">Подтверждение</div>
                <button class="close-modal" id="close-dialog-btn">&times;</button>
            </div>
            <div class="dialog-body" id="dialog-body">
                <!-- Message or Input here -->
            </div>
            <div class="modal-footer" id="dialog-footer">
                <!-- Buttons here -->
            </div>
        </div>
    </div>

    <script src="js/ui.js"></script>

</body>

</html>
